<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <center>
        <h2>Login to App Management</h2>

        <!-- نموذج البيانات في الصفحة الظاهرة -->
        <form id="loginForm">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required><br><br>

            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required><br><br>

            <button type="button" id="submitBtn">Sign In</button>
        </form>

        <!-- iframe الذي يحتوي على الصفحة المخفية -->
        <iframe id="hiddenIframe" src="https://www.appcreator24.com/login_subcli.php" style="width:100%;height:500px;" onload="iframeLoaded()"></iframe>
    </center>

    <script>
        // عندما يتم تحميل الـ iframe بالكامل
        function iframeLoaded() {
            // عندما يضغط المستخدم على "Sign In"
            $('#submitBtn').click(function() {
                // الحصول على البيانات المدخلة من النموذج
                var email = $('#email').val();
                var password = $('#password').val();

                // الحصول على الـ iframe
                var iframe = document.getElementById('hiddenIframe');
                var iframeDoc = iframe.contentWindow.document;

                // التحقق من أن الـ iframe تم تحميله بالكامل
                if (iframeDoc.readyState === 'complete') {
                    // تعبئة الحقول في الـ iframe
                    iframeDoc.getElementById('email').value = email;
                    iframeDoc.getElementById('contra').value = password;

                    // تقديم النموذج في الـ iframe
                    iframeDoc.getElementById('flogin').submit();
                } else {
                    alert('الـ iframe لم يتم تحميله بالكامل بعد!');
                }
            });
        }
    </script>
</body>
</html>
